//{namespace name="backend/viison_shipping_common_order/order"}
Ext.define("Shopware.apps.ViisonShippingCommonOrder.view.list.List",{ override:"Shopware.apps.Order.view.list.List",viisonShippingCommon:{ snippets:{ buttons:{ batchLabelCreation:'{s name=list/buttons/batch_label_creation}{/s}'},tooltips:{ addLabel:'{s name=list/tooltips/add_label}{/s}',showTracking:'{s name=list/tooltips/show_tracking}{/s}'}},hasDispatchServiceProvider:false},viisonExtraBatchButtons:[],initComponent:function(){ var i=this;if(i.hasDispatchServiceProvider()){ i.viisonAddBatchButton(Ext.create("Ext.button.Button",{ iconCls:"c-sprite-box--plus",text:i.viisonShippingCommon.snippets.buttons.batchLabelCreation,action:"viisonBatchLabelCreation",disabled:true,handler:function(){ i.fireEvent("viisonBatchLabelCreation",i)}}))}i.callParent(arguments)},getColumns:function(){ var i=this.callParent(arguments),t=-1,e;Ext.Array.each(i,function(i,e){ if(Ext.getClassName(i)=="Ext.grid.column.Action"){ t=e}});if(t>-1){ e=i[t];e.items.push(this.createAddLabelButton());e.items.push(this.createTrackingButton());i[t]=Ext.create("Ext.grid.column.Action",{ width:e.width+45,items:e.items});e.destroy()}return i},createAddLabelButton:function(){ var i=this;return{ iconCls:"c-sprite-box--plus",action:"viisonShowDetailDispatchServiceProviderTab",tooltip:i.viisonShippingCommon.snippets.tooltips.addLabel,handler:function(t,e,n,o){ var a=t.getStore();var r=a.getAt(e);i.fireEvent("viisonShowDetailDispatchServiceProviderTab",r,t)},getClass:function(i,t,e){ if(!e.raw.hasDispatchMethod){ return"x-hide-display"}}}},createTrackingButton:function(){ var i=this;return{ iconCls:"c-sprite-box-search-result",action:"viisonTrackShipments",tooltip:i.viisonShippingCommon.snippets.tooltips.showTracking,handler:function(t,e,n,o){ var a=t.getStore();var r=a.getAt(e);i.fireEvent("viisonTrackShipments",r)},getClass:function(i,t,e){ if(!e.raw.hasDispatchMethod){ return"x-hide-display"}}}},getGridSelModel:function(){ var i=this;var t=i.callParent(arguments);t.addListener("selectionchange",function(t,e){ Ext.each(i.viisonExtraBatchButtons,function(i){ if(i!==null){ i.setDisabled(e.length===0)}})});return t},viisonAddBatchButton:function(i){ var t=this;t.viisonExtraBatchButtons=(t.viisonExtraBatchButtons||[]).concat(i)},getToolbar:function(){ var i=this;var t=i.callParent(arguments);Ext.each(i.viisonExtraBatchButtons,function(i){ t.insert(1,i)});return t},hasDispatchServiceProvider:function(){ var i=this;if(i.viisonShippingCommon.hasDispatchServiceProvider){ return true}if(Shopware.apps.ViisonIntrashipOrder||Shopware.apps.ViisonUPSOrder){ return true}return false}});
