//{namespace name="backend/viison_ups_order/order"}
Ext.define("Shopware.apps.ViisonUPSOrder.view.detail.LabelConfirm",{ extend:"Shopware.apps.ViisonShippingCommonOrder.view.detail.LabelConfirm",alias:"widget.order-viison-ups-label-confirm-panel",cls:Ext.baseCSSPrefix+"order-viison-ups-label-confirm-panel",dispatchServiceProviderPrefix:"ViisonUPS",dispatchServiceProviderName:"UPS",maxLength:{ firstName:{ViisonUPS_Classes_ShipConfirmRequest::MAX_FIRST_NAME_LENGTH},lastName:{ViisonUPS_Classes_ShipConfirmRequest::MAX_LAST_NAME_LENGTH},companyName:{ViisonUPS_Classes_ShipConfirmRequest::MAX_COMPANY_NAME_LENGTH},companyDepartment:{ViisonUPS_Classes_ShipConfirmRequest::MAX_COMPANY_DEPARTMENT_LENGTH},street:{ViisonUPS_Classes_ShipConfirmRequest::MAX_STREET_LENGTH},streetName:undefined,streetNumber:undefined,zip:{ViisonUPS_Classes_ShipConfirmRequest::MAX_ZIP_LENGTH},city:{ViisonUPS_Classes_ShipConfirmRequest::MAX_CITY_LENGTH},phoneNumber:{ViisonUPS_Classes_ShipConfirmRequest::MAX_PHONE_NUMBER_LENGTH},email:{ViisonUPS_Classes_ShipConfirmRequest::MAX_EMAIL_LENGTH},weight:undefined,length:undefined,width:undefined,height:undefined},customSnippets:{ details:{ labels:{ residentialAddress:'{s name=label_confirm/details/labels/residential_address}{/s}'}},settingsDetails:{ labels:{ additionalHandlingRequired:'{s name=label_confirm/settings_details/labels/additional_handling_required}{/s}',packagingType:'{s name=label_confirm/settings_details/labels/packaging_type}{/s}',product:'{s name=label_confirm/settings_details/labels/product}{/s}',higherInsurance:'{s name=label_confirm/settings_details/labels/higher_insurance}{/s}',insuredValue:'{s name=label_confirm/settings_details/labels/insured_value}{/s}',insuredValueCurrency:'{s name=label_confirm/settings_details/labels/insured_value_currency}{/s}'}},tooltips:{ additionalHandlingRequiredHelp:'{s name=label_confirm/tooltips/additional_handling_required_help}{/s}',higherInsuranceHelp:'{s name=label_confirm/tooltips/higher_insurance_help}{/s}'}},initComponent:function(){ var e=this;e.packagingTypeStore=Ext.getStore("viison-ups-packaging-type-store").load();this.callParent(arguments)},getItems:function(){ var e=this;var i;if(!e.isReturn){ i=[e.createDetailsContainer(),e.createPackagingContainer(),e.createSettingsDetails()].concat(e.createExtraContainers())}else{ i=[e.createDetailsContainer()];if(!e.record){ i.push(e.createPackagingContainer())}}return i},createDetailsFormRows:function(e,i){ var a=this;var l=a.callParent(arguments);if(!a.isReturn){ l=l.concat([{ xtype:"checkbox",name:"residentialAddress",fieldLabel:a.customSnippets.details.labels.residentialAddress,value:false,uncheckedValue:false,inputValue:true}])}return l},createSettingsFormRows:function(e,i){ var a=this;a.packagingTypeComboBox={ xtype:"combobox",flex:2.5,name:"packagingType",fieldLabel:a.customSnippets.settingsDetails.labels.packagingType,valueField:"id",displayField:"name",queryMode:"local",mode:"local",required:true,editable:false,allowBlank:false,store:a.packagingTypeStore};a.additionalHandlingRequired=Ext.create("Ext.form.field.Checkbox",{ xtype:"checkbox",name:"additionalHandlingRequired",helpText:a.customSnippets.tooltips.additionalHandlingRequiredHelp,fieldLabel:a.customSnippets.settingsDetails.labels.additionalHandlingRequired,value:false,uncheckedValue:false,inputValue:true});a.higherInsurance=Ext.create("Ext.form.field.Checkbox",{ xtype:"checkbox",name:"higherInsurance",value:false,uncheckedValue:false,inputValue:true,listeners:{ change:a.higherInsuranceFieldChanged,scope:a}});a.insuredValue=Ext.create("Ext.form.field.Number",{ decimalPrecision:2,submitLocaleSeparator:false,name:"insuredValue",fieldLabel:a.customSnippets.settingsDetails.labels.insuredValue,labelWidth:60,width:165,allowBlank:false,disabled:true});a.insuredValueCurrency=Ext.create("Ext.form.field.Text",{ xtype:"textfield",name:"insuredValueCurrency",fieldLabel:a.customSnippets.settingsDetails.labels.insuredValueCurrency,helpText:a.customSnippets.tooltips.higherInsuranceHelp,labelWidth:65,width:150,value:"EUR",allowBlank:false,disabled:true});return[a.createFormRow({ rowCls:"confirm-panel-row-product",padding:i,label:{ width:e,text:a.customSnippets.settingsDetails.labels.product},items:[a.productComboBox,a.productIcon,a.packagingTypeComboBox]}),a.createFormRow({ rowCls:"confirm-panel-row-number-of-labels",padding:i,label:{ width:e,text:a.snippets.settingsDetails.labels.numberOfLabels,labelStyle:"margin-top: 0px"},items:[a.numberOfLabels,a.numberOfLabelsIcon,Ext.create("Ext.form.field.Display",{ name:"&nbsp;",flex:1}),a.cashOnDelivery,a.additionalHandlingRequired]}),a.createFormRow({ rowCls:"confirm-panel-row-higher-insurance",padding:i,label:{ width:e,text:a.customSnippets.settingsDetails.labels.higherInsurance,labelStyle:"margin-top: 0px"},items:[a.higherInsurance,Ext.create("Ext.form.field.Display",{ name:"&nbsp;",flex:1}),a.insuredValue,Ext.create("Ext.form.field.Display",{ name:"&nbsp;",flex:1}),a.insuredValueCurrency]})]},higherInsuranceFieldChanged:function(e,i){ var a=this;a.insuredValue.setDisabled(!i);a.insuredValueCurrency.setDisabled(!i)},setValues:function(){ var e=this;e.callParent(arguments);if(e.record&&!e.isReturn){ e.detailsContainer.getForm().setValues({ residentialAddress:e.record[e.dispatchServiceProviderPrefix].residentialAddress});e.additionalHandlingRequired.setValue(e.record[e.dispatchServiceProviderPrefix].additionalHandlingRequired);var i=e.record[e.dispatchServiceProviderPrefix].higherInsurance;e.higherInsurance.setValue(i);e.insuredValue.setDisabled(!i);e.insuredValue.setValue(e.record.get("invoiceAmount"));e.insuredValueCurrency.setDisabled(!i);e.insuredValueCurrency.setValue(e.record.get("currency"))}if(e.settingsContainer){ e.settingsContainer.getForm().setValues({ packagingType:e.getDefaultPackagingType()})}},getDefaultPackagingType:function(){ var e=this;if(e.record){ return e.record[e.dispatchServiceProviderPrefix].packagingType}else{ return e.defaultPackagingType}}});
